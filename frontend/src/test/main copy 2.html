<!DOCTYPE html>
<html>
<head>
    <title>√Årbol Binario</title>
    <style>
        body {
            background-color: #f2f2f7;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        canvas {
            background-color: white;
            border-radius: 20px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
            cursor: grab;
        }

        .nodo {
            width: 40px;
            height: 40px;
            background-color: #4287f5;
            border: 2px solid #333;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: white;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <canvas id="canvas" width="1000" height="600"></canvas>

    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        let zoom = 1;
        let panX = 0;
        let panY = 0;
        let isDragging = false;
        let lastX, lastY;

        class Nodo {
            constructor(valor) {
                this.valor = valor;
                this.izquierda = null;
                this.derecha = null;
                this.x = 0;
                this.y = 0;
            }
        }

        class ArbolBinario {
            constructor() {
                this.raiz = null;
            }

            insertar(valor) {
                const nuevoNodo = new Nodo(valor);

                if (this.raiz === null) {
                    this.raiz = nuevoNodo;
                    nuevoNodo.x = canvas.width / 2;
                } else {
                    this.insertarNodo(this.raiz, nuevoNodo, canvas.width / 2, 0, 1);
                }
            }

            insertarNodo(nodo, nuevoNodo, x, y, nivel) {
                const separacion = canvas.width / (2 ** (nivel + 1));
                const posY = 70 + nivel * 70;

                if (nuevoNodo.valor < nodo.valor) {
                    if (nodo.izquierda === null) {
                        nuevoNodo.x = x - separacion;
                        nuevoNodo.y = posY;
                        nodo.izquierda = nuevoNodo;
                    } else {
                        this.insertarNodo(nodo.izquierda, nuevoNodo, x - separacion, posY, nivel + 1);
                    }
                } else {
                    if (nodo.derecha === null) {
                        nuevoNodo.x = x + separacion;
                        nuevoNodo.y = posY;
                        nodo.derecha = nuevoNodo;
                    } else {
                        this.insertarNodo(nodo.derecha, nuevoNodo, x + separacion, posY, nivel + 1);
                    }
                }
            }

            dibujar() {
                ctx.setTransform(1, 0, 0, 1, 0, 0); // Reset the transformation matrix
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                ctx.translate(panX, panY);
                ctx.scale(zoom, zoom);

                this.dibujarNodo(this.raiz);
            }

            dibujarNodo(nodo) {
                if (nodo !== null) {
                    if (nodo.izquierda !== null) {
                        this.dibujarLinea(nodo.x, nodo.y, nodo.izquierda.x, nodo.izquierda.y);
                        this.dibujarNodo(nodo.izquierda);
                    }

                    if (nodo.derecha !== null) {
                        this.dibujarLinea(nodo.x, nodo.y, nodo.derecha.x, nodo.derecha.y);
                        this.dibujarNodo(nodo.derecha);
                    }

                    ctx.beginPath();
                    ctx.arc(nodo.x, nodo.y, 20, 0, 2 * Math.PI);
                    ctx.fillStyle = "#4287f5";
                    ctx.fill();
                    ctx.strokeStyle = "#333";
                    ctx.stroke();
                    ctx.fillStyle = "white";
                    ctx.fillText(nodo.valor, nodo.x - 6, nodo.y + 6);
                }
            }

            dibujarLinea(x1, y1, x2, y2) {
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.strokeStyle = "#333";
                ctx.stroke();
            }
        }

        const arbol = new ArbolBinario();
        const cantidad = 100;

        for (let i = 0; i < cantidad; i++) {
            const numero = Math.floor(Math.random() * 100);
            arbol.insertar(numero);
        }

        function draw() {
            arbol.dibujar();
        }

        canvas.addEventListener("wheel", (e) => {
            e.preventDefault();
            const scaleAmount = 0.1;
            if (e.deltaY < 0) {
                zoom += scaleAmount;
            } else {
                zoom -= scaleAmount;
            }
            if (zoom < 0.1) zoom = 0.1; // Set a minimum zoom level
            draw();
        });

        canvas.addEventListener("mousedown", (e) => {
            if (e.button === 0) {
                isDragging = true;
                lastX = e.clientX;
                lastY = e.clientY;
            }
        });

        canvas.addEventListener("mouseup", () => {
            isDragging = false;
        });

        canvas.addEventListener("mousemove", (e) => {
            if (isDragging) {
                panX += e.clientX - lastX;
                panY += e.clientY - lastY;
                lastX = e.clientX;
                lastY = e.clientY;
                draw();
            }
        });

        draw(); // Initial draw
    </script>
</body>
</html>
